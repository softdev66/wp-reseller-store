"use strict";!function(a){var b={cartCount:"rstore-cart-count"},c={init:function(){var a=parseInt(d.get(b.cartCount),10);c.updateCount(a),a>0&&c.api("get",function(a){c.updateCount(a)})},api:function(b,c,d){var e={method:b,url:rstore.urls.cart_api,dataType:"json",contentType:"application/json",crossDomain:!0,xhrFields:{withCredentials:!0}};3===arguments.length&&(e.data=JSON.stringify(c)),d=2===arguments.length?c:d,a.ajax(e).done(d)},addItem:function(a,b,d){var e={items:[{id:a,quantity:b>0?b:1,periodCount:1}]};c.api("post",e,function(a){c.updateCount(a),d&&(window.location.href=rstore.urls.cart)})},updateCount:function(c){c=void 0!==c.cartCount?c.cartCount:c,c=c?parseInt(c,10):0,d.set(b.cartCount,c),a(".rstore-cart-count").text(c),a(".widget.rstore-cart").each(function(){a(this).toggle(!a(this).hasClass("hide-empty")||c>0)})},addItemButton:function(b){b.preventDefault();var d=a(this),e=d.attr("data-id"),f=parseInt(d.attr("data-quantity"),10),g="true"===d.attr("data-redirect");c.addItem(e,f,g)},addItemParam:function(){var a=window.location.search.match(/(\?|&)add-to-cart=(.*?)(&|$)/i);null!==a&&c.addItem(a[2],1,!1)},updateQty:function(b){var c=a(this),d=c.val();if(""===d){if("focusout"!==b.type)return!1;d=1}d=parseInt(d,10),d=d>1?d:1,c.val(d),c.next(".rstore-add-to-cart").attr("data-quantity",d)}},d={get:function(a){var b=document.cookie.split(";");a+="=";for(var c=0;c<b.length;c++){for(var d=b[c];" "===d.charAt(0);)d=d.substring(1);if(0===d.indexOf(a))return d.substring(a.length,d.length)}return null},set:function(a,b,c){var d=new Date;c=c?c:30,d.setTime(d.getTime()+86400*c*1e3),document.cookie=a+"="+b+"; expires="+d.toGMTString()+"; path=/"}};a(document).ready(function(a){c.addItemParam(),c.init(),a(document).on("click",".rstore-add-to-cart",c.addItemButton),a(document).on("keyup blur",".rstore-add-to-cart-quantity",c.updateQty)})}(jQuery);